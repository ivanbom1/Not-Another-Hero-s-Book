{% extends 'base.html' %}

{% block title %}Add Choice - NAHB{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <h2>ðŸ”— Add Choice</h2>
    
    <p><strong>Story:</strong> {{ story.title }}</p>
    <p><strong>Page:</strong> {{ page.text|truncatewords:10 }}</p>
    
    {% if error %}
        <div class="error">{{ error }}</div>
    {% endif %}
    
    <form method="post" style="display: flex; flex-direction: column; gap: 1rem;">
        {% csrf_token %}
        
        <div>
            <label for="text">Choice Text:</label>
            <input type="text" id="text" name="text" required placeholder="e.g., 'Go left into the forest'" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px;">
        </div>
        
        <div>
            <label for="next_page_id">Next Page:</label>
            <select id="next_page_id" name="next_page_id" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px;">
                <option value="">-- Select a page --</option>
                {% for p in story_pages %}
                    <option value="{{ p.id }}">Page {{ p.sequence }}{% if p.is_ending %} (Ending){% endif %}</option>
                {% endfor %}
            </select>
        </div>
        
        <div style="display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-success" style="flex: 1;">Add Choice</button>
            <a href="{% url 'edit_story' story.id %}" class="btn" style="flex: 1; text-align: center;">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}