{% extends 'base.html' %}

{% block title %}Stories - NAHB{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h2>Published Stories</h2>
        <a href="{% url 'create_story' %}" class="btn btn-success">+ Write Your Tale</a>
    </div>
    
    {% if stories %}
        <div class="stories-grid">
            {% for story in stories %}
                <div class="story-card">
                    <h3>{{ story.title }}</h3>
                    <p style="font-style: italic; color: #666; margin-bottom: 1rem;">{{ story.description }}</p>
                    <p style="color: #888; font-size: 0.9rem; margin-bottom: 1rem;">
                        <strong>ðŸ“– Playthroughs:</strong> {{ story.plays|default:"0" }}
                    </p>
                    {% if story.status == 'suspended' %}
                        <p style="color: #a00; font-weight: bold; margin-bottom: 1rem;">â›” Story Suspended</p>
                    {% endif %}
                    <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem;">
                        <a href="{% url 'story_detail' story.id %}" class="btn" style="flex: 1; text-align: center; padding: 0.7rem;">View</a>
                        {% if story.status != 'suspended' %}
                            <a href="{% url 'play_story' story.id %}" class="btn btn-success" style="flex: 1; text-align: center; padding: 0.7rem;">Play</a>
                        {% else %}
                            <button class="btn btn-danger" disabled style="flex: 1; padding: 0.7rem;">Suspended</button>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align: center; font-size: 1.1rem; color: #666; padding: 2rem;">No stories yet. <a href="{% url 'create_story' %}">Be the first author!</a></p>
    {% endif %}
</div>
{% endblock %}