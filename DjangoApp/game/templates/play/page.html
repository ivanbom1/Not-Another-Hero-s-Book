{% extends 'base.html' %}

{% block title %}Playing: {{ story.title }} - NAHB{% endblock %}

{% block content %}
<div class="card" style="max-width: 800px; margin: 0 auto;">
    <h2>{{ story.title }}</h2>
    
    <div style="background: #f9f9f9; padding: 2rem; border-radius: 8px; margin: 2rem 0; min-height: 200px;">
        <p style="font-size: 1.1rem; line-height: 1.8;">{{ page.text }}</p>
    </div>
    
    {% if is_ending %}
        <div style="background: #d4edda; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
            <strong>ðŸŽ‰ End: {{ page.ending_label|default:"Story Complete" }}</strong>
        </div>
    {% else %}
        <form method="post" style="display: flex; flex-direction: column; gap: 1rem;">
            {% csrf_token %}
            <h3>What do you do?</h3>
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                {% for choice in page.choices %}
                    <label style="padding: 1rem; border: 2px solid #667eea; border-radius: 4px; cursor: pointer; transition: all 0.3s;">
                        <input type="radio" name="next_page_id" value="{{ choice.next_page_id }}" required style="margin-right: 0.5rem;">
                        {{ choice.text }}
                    </label>
                {% empty %}
                    <p>No choices available.</p>
                {% endfor %}
            </div>
            <button type="submit" class="btn btn-success">Continue</button>
        </form>
    {% endif %}
    
    <div style="margin-top: 2rem;">
        <a href="{% url 'story_detail' story.id %}" class="btn">Back to Story</a>
        <a href="{% url 'stories_list' %}" class="btn">Back to List</a>
    </div>
</div>
{% endblock %}